import{e as b,m,_,r as d,o,c as s,a as t,f as i,g,F as T,h as B,i as $,t as x,b as V,R as N}from"./index-f91ca504.js";import{t as p}from"./toast-7e7c7b23.js";import{u as a}from"./common-d2cc9a39.js";const L=b("adminNavListMenu",{state:()=>({navList:[{path:"/admin/products",name:"行程管理"},{path:"/admin/article",name:"文章管理"},{path:"/admin/coupon",name:"優惠券管理"},{path:"/admin/orderlist",name:"訂單列表"}]})}),P={computed:{...m(L,["navList"])}},E={class:"sidebar position-fixed start-0 top-0 bottom-0 z-10 d-flex flex-column h-100 overflow-x-hidden overflow-y-auto"},A={class:"brand-section flex-shrink-0 p-4"},R={class:"sidebar-menu list-unstyled mb-0"};function S(e,n,l,h,f,r){const c=d("router-link");return o(),s("div",E,[t("div",A,[i(c,{class:"flex w-full h-20 justify-content-center align-items-center text-decoration-none text-white",to:"/admin"},{default:g(()=>[$("Admin")]),_:1})]),t("ul",R,[(o(!0),s(T,null,B(e.navList,u=>(o(),s("li",{class:"",key:u.path},[i(c,{class:"d-block py-3 px-4 fs-6 text-decoration-none text-white",to:u.path},{default:g(()=>[$(x(u.name),1)]),_:2},1032,["to"])]))),128))])])}const D=_(P,[["render",S]]),H={props:{logout:{type:Function,default(){}}}},M={class:"header-bar sticky-top start-0 top-0 end-0 d-flex align-items-center p-3 bg-white shadow-sm"},C={class:"dropdown ms-auto",ref:"dropdown"},F=t("div",{class:"profile-info dropdown-toggle","data-bs-toggle":"dropdown"},[t("div",{class:"profile-info__img d-flex justify-content-center align-items-center w-3 h-3 rounded-circle bg-light"},[t("i",{class:"bi bi-person-fill"})])],-1),I={class:"dropdown-menu"};function U(e,n,l,h,f,r){return o(),s("header",M,[t("div",C,[F,t("ul",I,[t("li",null,[t("a",{class:"dropdown-item",href:"#",onClick:n[0]||(n[0]=V((...c)=>l.logout&&l.logout(...c),["prevent"]))},"登出")])])],512)])}const j=_(H,[["render",U]]),z={props:{pageTitle:{type:String,require:!0}},computed:{...m(L,["navList"]),getPath(){return this.navList.filter(e=>e.path===this.$route.path)}}},O={class:"page-title pt-4"},q={key:0,class:"fs-4 text-secondary"},G={key:1,class:"fs-4 text-secondary"};function J(e,n,l,h,f,r){return o(),s("div",O,[r.getPath.length>0?(o(),s("h2",q,x(r.getPath[0].name),1)):(o(),s("h2",G,"後台管理"))])}const K=_(z,[["render",J]]);const{VITE__URL:v}={VITE__PATH:"ken100",VITE__URL:"https://vue3-course-api.hexschool.io/v2",BASE_URL:"/hexschool-vue-dashboard",MODE:"production",DEV:!1,PROD:!0},Q={components:{RouterView:N,NavBar:D,HeaderBar:j,PageTitle:K},methods:{checkLogin(){a().isLoading=!0;const e=document.cookie.replace(/(?:(?:^|.*;\s*)userToken\s*=\s*([^;]*).*$)|^.*$/,"$1");e?(this.$http.defaults.headers.common.Authorization=e,this.$http.post(`${v}/api/user/check`).then(()=>{}).catch(n=>{this.$router.push("/login"),a().isLoading=!1,p.fire({icon:"error",title:`${n.response.data.message}`})})):(a().isLoading=!1,p.fire({icon:"error",title:"請先登入"}).then(()=>{this.$router.push("/login")}))},logout(){a().isLoading=!0,this.$http.post(`${v}/logout`).then(e=>{a().isLoading=!1,document.cookie="userToken=;expires=;",p.fire({icon:"success",title:`${e.data.message}`}).then(()=>{this.$router.push("/login")})}).catch(e=>{a().isLoading=!1,p.fire({icon:"error",title:`${e.response.data.message}`})})}},computed:{...m(a,["isLoading"])},created(){this.checkLogin()}},W={class:"layout-content d-flex flex-column h-100"},X={class:"data-section flex-grow-1 pb-3"},Y={class:"container-fluid"};function Z(e,n,l,h,f,r){const c=d("NavBar"),u=d("HeaderBar"),k=d("PageTitle"),w=d("router-view"),y=d("VueLoading");return o(),s("div",W,[i(c),t("section",X,[i(u,{logout:r.logout},null,8,["logout"]),t("div",Y,[i(k,{"page-title":"test"}),i(w)]),i(y,{active:e.isLoading},null,8,["active"])])])}const se=_(Q,[["render",Z]]);export{se as default};
